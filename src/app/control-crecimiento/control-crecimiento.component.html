<div class="container">
  <div fxLayout="row" fxLayoutAlign="center" fxLayoutWrap>
    <div fxFlex="20%" class="persona-container-list">
      <mat-nav-list>
        <mat-list-item *ngFor="let persona of personas" role="navigation" (click)="habilitarPanelControlCrecimiento(persona)">
          <img matListAvatar [src]="persona.foto" alt="foto">
          <h2 matLine> {{persona.nombre}} {{persona.apellido}} </h2>
          <p mat-line> nacido: {{persona.fechaNacimiento | date }} </p>
          <mat-divider></mat-divider>
        </mat-list-item>
      </mat-nav-list>
    </div>
    <div fxFlex="70%">
      <div fxLayout="row" fxLayoutWrap>
        <div fxFlex="20" fxFlex.lt-sm="100" fxFlex.sm="100" fxFlex.md="50">

          <div fxLayout="column" fxLayoutWrap>
            <img class="imagen" [src]="selectedPersona.foto" alt="foto" height="180" width="200">
            <div *ngIf="currentFileUpload" class="progress">
              <div class="progress-bar progress-bar-info progress-bar-striped" role="progressbar" attr.aria-valuenow="{{progress.percentage}}"
                aria-valuemin="0" aria-valuemax="100" [ngStyle]="{width:progress.percentage+'%'}">
                {{progress.percentage}}%</div>
              <mat-progress-bar *ngIf="currentFileUpload" class="example-margin" color="primary" mode="determinate" [value]="progress.percentage">
              </mat-progress-bar>
            </div>
            <input #fileInput type="file" style="display:none" (change)="onSelectFile($event)" />
            <button [disabled]="disable" *ngIf="!selectedFiles" matTooltip="Cambiar Imagen" mat-button color="primary" (click)="fileInput.click()"  >
                <span>cambiar imagen</span>
              <mat-icon>edit</mat-icon>
            </button>
            <button *ngIf="selectedFiles" matTooltip="Guardar" mat-button  color="primary" (click)="onUpload()"  >
                <span>guardar imagen</span>
              <mat-icon>cloud_upload</mat-icon>
            </button>

          </div>

        </div>
        <div fxFlex="40" fxFlex.lt-sm="100" fxFlex.sm="100" fxFlex.md="100">
          <p>Nombre: {{selectedPersona.nombre}} {{selectedPersona.apellido}} </p>
          <p>Fecha nacimiento: {{selectedPersona.fechaNacimiento | date}}</p>
          <p>Edad actual: {{selectedPersona.edadPeriodo}}</p>
          <p>Genero: {{selectedPersona.genero}}</p>
        </div>
        <div fxFlex="40" fxFlex.lt-sm="100" fxFlex.sm="100" fxFlex.md="40">
          Agregar control
          <form [formGroup]="controlForm" (ngSubmit)="onSubmit()" class="form-control-container">
            <mat-form-field>
              <input class="form-control" formControlName="peso" matInput placeholder="Peso (Kg)" type="number">
              <mat-error>Debe ingresar un peso</mat-error>
            </mat-form-field>
            <mat-form-field>
              <input class="form-control" matInput formControlName="talla" placeholder="Talla (cm)" type="number">
              <mat-error>debe ingresar una talla</mat-error>
            </mat-form-field>
            <button [disabled]="disable" mat-button type="submit" mat-raised-button color="primary">Agregar</button>
          </form>
        </div>
      </div>

      <mat-divider></mat-divider>
      <div fxLayout="row" fxFlex="100">
        <mat-radio-group name="opTipos" [disabled]="disable">
          <mat-radio-button class="example-radio-button" *ngFor="let tipo of tipos" [checked]="tipo.checked" [value]="tipo.value" (change)="onSelectionChange(tipo)"
            name="opTipos">
            {{tipo.viewValue}}
          </mat-radio-button>
        </mat-radio-group>
        <mat-divider></mat-divider>
      </div>
      <hr>
      <div fxLayout="row" fxFlex="100">
        <div fxFlex>
          <app-percentil-oms></app-percentil-oms>
        </div>
      </div>

      <div fxFlex>
        <div class="control-header">
          <p> Infomacion refrente a los cotroles</p>
        </div>
        <div class="persona-header">
          <mat-form-field>
            <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filtrar">
          </mat-form-field>
        </div>
        <mat-table #table [dataSource]="dataSourceControles" matSort>
          <!-- Id Column -->
          <ng-container matColumnDef="fecha">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Fecha registro</mat-header-cell>
            <mat-cell *matCellDef="let control"> {{control.fechaRegistro | date : 'dd/MM/yyyy'}} </mat-cell>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="edad">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Edad(d√≠as) </mat-header-cell>
            <mat-cell *matCellDef="let control"> {{control.edad}} </mat-cell>
          </ng-container>

          <ng-container matColumnDef="peso">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Peso(Kg) </mat-header-cell>
            <mat-cell *matCellDef="let control"> {{control.peso}} </mat-cell>
          </ng-container>

          <ng-container matColumnDef="talla">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Talla (cm)</mat-header-cell>
            <mat-cell *matCellDef="let control"> {{control.talla}} </mat-cell>
          </ng-container>
          <!-- Acciones-->
          <ng-container matColumnDef="actionsColumn">
            <mat-header-cell *matHeaderCellDef>Acciones</mat-header-cell>
            <mat-cell *matCellDef="let item">
              <button matTooltip="Ver" mat-icon-button (click)="read(item.id)">
                <mat-icon>info_outline</mat-icon>
              </button>
              <button matTooltip="Editar" mat-icon-button color="primary" (click)="prepareUpdate(item.id)">
                <mat-icon>create</mat-icon>
              </button>
              <button matTooltip="Eliminar" mat-icon-button color="warn" (click)="delete(item.id)">
                <mat-icon>remove_circle</mat-icon>
              </button>
            </mat-cell>
          </ng-container>
          <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
          <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
        </mat-table>
        <mat-paginator #paginator [pageSize]="5" [pageSizeOptions]="[5, 10, 20]">
        </mat-paginator>
      </div>
    </div>
    <div fxFlex="10%" class="persona-container-list">
      Informacion referen a los colores de las curvas de crecimiento
    </div>
  </div>
</div>